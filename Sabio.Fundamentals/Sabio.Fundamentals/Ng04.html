<!DOCTYPE html>
<html>
<head>
    <title>Ng 4</title>
    <meta charset="utf-8" />
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <link href="Content/angular-toastr.min.css" rel="stylesheet" />
</head>
<body>
    <div data-ng-app="mainApp" class="container">
        <h2>Angular Example 4</h2>
        <div ng-controller='dogController as dogVm' class="row">
            <div class="well col-md-12">
                <p>
                    This example builds upon Example 3 by:
                </p>
                <ul>
                    <li>Moving services and controllers to separate files.</li>
                    <li>Demonstrating an entity (Dogs) with a variety of property data types.</li>
                    <li>Implementing angular form validation</li>
                </ul>
            </div>
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <span class="h4">Dogs</span>
                        <button type="button" class="btn btn-primary btn-xs pull-right " data-ng-click="dogVm.add()">Add New Dog</button>
                    </div>
                    <div class="panel-body">
                        <div data-ng-repeat="item in dogVm.items">
                            <a ng-click="dogVm.select(item, $index)">{{item.name + ' - (' + item.breed + ')'}}</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-default" ng-show="dogVm.item">
                    <div class="panel-heading">
                        <span class="h4">Create / Edit Dog</span>
                    </div>
                    <div class="panel-body" style="margin-left: 15px; margin-right: 15px;">
                        <form name="dogVm.editForm" class="form-horizontal"
                              novalidate ng-submit="dogVm.save()">
                            <div class="form-group">
                                <label>Id: </label><span ng-bind="dogVm.item.id | uppercase"></span>
                            </div>
                            <div class="form-group"
                                 ng-class="{'has-error' : dogVm.editForm.name.$invalid && (dogVm.editForm.$submitted || dogVm.editForm.name.$dirty)}">
                                <label>Name</label>
                                <input type="text" name="name" class="form-control" ng-model="dogVm.item.name" required ng-maxlength="50" />
                                <div ng-show="dogVm.editForm.$submitted || dogVm.editForm.name.$dirty">
                                    <span ng-show="dogVm.editForm.name.$error.required"
                                          class="help-block">Name is required</span>
                                </div>
                            </div>
                            <div class="form-group"
                                 ng-class="{'has-error' : dogVm.editForm.breed.$invalid && (dogVm.editForm.$submitted || dogVm.editForm.breed.$dirty)}">
                                <label>Breed</label>
                                <input type="text" name="breed" class="form-control" ng-model="dogVm.item.breed" required ng-minlength="3" ng-maxlength="50" />
                                <div ng-show="dogVm.editForm.$submitted || dogVm.editForm.breed.$dirty">
                                    <p ng-show="dogVm.editForm.breed.$error.required"
                                       class="help-block">Breed is required</p>
                                    <p ng-show="dogVm.editForm.breed.$error.minlength"
                                       class="help-block">Breed must be at least 3 characters</p>
                                    <p ng-show="dogVm.editForm.breed.$error.maxlength"
                                       class="help-block">Breed can be no more than 50 characters</p>
                                </div>
                            </div>
                            <div class="form-group"
                                 ng-class="{'has-error' : dogVm.editForm.weight.$invalid && (dogVm.editForm.$submitted || dogVm.editForm.weight.$dirty)}">
                                <label>Weight (lbs)</label>
                                <input type="number" class="form-control" name="weight"
                                       ng-model="dogVm.item.weight" required ng-min="1" ng-max="250" />
                                <div ng-show="dogVm.editForm.$submitted || dogVm.editForm.weight.$dirty">
                                    <span ng-show="dogVm.editForm.weight.$error.required"
                                          class="help-block">
                                        Weight is required.
                                    </span>
                                    <span ng-show="dogVm.editForm.weight.$error.min"
                                          class="help-block">
                                        Weight must be at least 1 lb.
                                    </span>
                                    <span ng-show="dogVm.editForm.weight.$error.max"
                                          class="help-block">
                                        Weight cannot be more than 250 lbs.
                                    </span>
                                </div>
                            </div>
                            <div class="form-group"
                                 ng-class="{'has-error' : dogVm.editForm.birthDate.$invalid && (dogVm.editForm.$submitted || dogVm.editForm.birthDate.$dirty)}">
                                <label>Birthdate</label>
                                <input type="text" name="birthDate" class="form-control" ng-model="dogVm.item.birthDate" required />
                                <div ng-show="dogVm.editForm.$submitted || dogVm.editForm.birthDate.$dirty">
                                    <span ng-show="dogVm.editForm.birthDate.$error.required"
                                          class="help-block">Birthdate is required</span>
                                </div>
                            </div>
                            <div class="form-group"
                                 ng-class="{'has-error' : dogVm.editForm.gender.$invalid && (dogVm.editForm.$submitted || dogVm.editForm.gender.$dirty)}">
                                <label>Gender</label>
                                <div>
                                    <label class="radio-inline">
                                        <input type="radio" name="gender" value="M" ng-model="dogVm.item.gender" required />
                                        Male
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" name="gender" value="F" ng-model="dogVm.item.gender" required />
                                        Female
                                    </label>
                                    <div ng-show="dogVm.editForm.$submitted || dogVm.editForm.gender.$dirty">
                                        <p ng-show="dogVm.editForm.gender.$error.required"
                                           class="help-block">
                                            Gender is required
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Other</label>
                                <div>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" ng-model="dogVm.item.isNeutered" />
                                        Neutered/Spayed
                                    </label>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" ng-model="dogVm.item.isMicrochipped" />
                                        Microchipped
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary btn-sm"
                                    ng-enabled="dogVm.editForm.$dirty">
                                Save
                            </button>
                            <button type="button" class="btn btn-default btn-sm"
                                    ng-click="dogVm.cancel()"
                                    ng-enabled="dogVm.editForm.$dirty">
                                Cancel
                            </button>
                            <button type="button" class="btn btn-warning btn-sm"
                                    ng-click="dogVm.delete()"
                                    ng-show="dogVm.item.id">
                                Delete
                            </button>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="Scripts/jquery-3.1.1.js"></script>
    <script src="/Scripts/angular.js"></script>
    <script src="/Scripts/angular-toastr.min.js"></script>
    <script src="/Scripts/angular-toastr.tpls.min.js"></script>

    <script>

        (function () {
            angular.module('mainApp', ['toastr']);
        })();

    </script>

    <script src="Scripts/app/dog/dog-service.js"></script>
    <script src="Scripts/app/services/alert-service.js"></script>
    <script src="Scripts/app/dog/dog-controller.js"></script>


</body>
</html>

